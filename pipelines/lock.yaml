context_parser: pypyr.parser.keyvaluepairs
steps:
  - name: pypyr.steps.echo
    in:
      echoMe: "= pypyr lock ==============================================="
  - name: pypyr.steps.default
    comment: set default values for optional cli inputs
    in:
      defaults:
        update: False

  - name: pypyr.steps.echo
    run: "{update}"
    in:
      echoMe: "= poetry lock ============================================="
  - name: pypyr.steps.shell
    run: "{update}"
    in:
      cmd: poetry lock

  - name: pypyr.steps.echo
    in:
      echoMe: "= poetry export requirements(all|main).txt ================"
  - name: pypyr.steps.shell
    in:
      cmd: poetry export --no-interaction --format requirements.txt --output requirements.all.txt --with dev
  - name: pypyr.steps.shell
    in:
      cmd: poetry export --no-interaction --format requirements.txt --output requirements.main.txt

  - name: pypyr.steps.echo
    in:
      echoMe: "= pip freeze =============================================="
  - name: pypyr.steps.shell
    in:
      cmd: bash scripts/pip/freeze.ba.sh
